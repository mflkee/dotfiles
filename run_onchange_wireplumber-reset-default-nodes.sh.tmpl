#!/bin/sh
# Reset WirePlumber persisted default-nodes so auto-switching can take effect
# Runs on change (when audio config updates via chezmoi apply)

set -eu
STATE="$HOME/.local/state/wireplumber/default-nodes"
if [ -f "$STATE" ]; then
  rm -f "$STATE"
fi

if command -v systemctl >/dev/null 2>&1; then
  systemctl --user try-restart wireplumber >/dev/null 2>&1 || true
fi

exit 0
